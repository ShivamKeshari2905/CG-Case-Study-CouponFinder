<!--Carousel Wrapper-->
<div class="container">
  <div class="row">
    <div class="col-lg-9 Slide justify-content-start">
      <div id="carousel-example-1z" class="carousel slide carousel-fade z-depth-1-half mt-2" data-ride="carousel">
        <!--Indicators-->
        <ol class="carousel-indicators">
          <li data-target="#carousel-example-1z" data-slide-to="0" class="active"></li>
          <li data-target="#carousel-example-1z" data-slide-to="1"></li>
          <li data-target="#carousel-example-1z" data-slide-to="2"></li>
        </ol>
        <!--/.Indicators-->
        <!--Slides-->
        <div class="carousel-inner" role="listbox">
          <!--First slide-->
          <div class="carousel-item active">
            <img class="d-block w-100 imagesize"
              src="https://cdn.grabon.in/gograbon/images/banners/banner-1619885549785/Discount%20Code.jpg"
              alt="First slide" />
          </div>
          <!--/First slide-->
          <!--Second slide-->
          <div class="carousel-item">
            <img class="d-block w-100 imagesize"
              src="https://cdn.grabon.in/gograbon/images/banners/banner-1620580870426/Offer%20Code.jpg"
              alt="Second slide" />
          </div>
          <!--/Second slide-->
          <!--Third slide-->
          <div class="carousel-item">
            <img class="d-block w-100 imagesize"
              src="https://cdn.grabon.in/gograbon/images/banners/banner-1620200784538/Coupon%20Code.jpg"
              alt="Third slide" />
          </div>
          <!--/Third slide-->
        </div>
        <!--/.Slides-->
        <!--Controls-->
        <a class="carousel-control-prev" href="#carousel-example-1z" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carousel-example-1z" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
        <!--/.Controls-->
      </div>
      <!--/.Carousel Wrapper-->
    </div>
    <div class="col-lg-3 Let mt-2" *ngIf="!utilityService.isAdmin()">
      <div class="card" style="width: 20rem; height: 21.7rem">
        <div style="width: 15rem; align-self: center">
          <img class="card-img-top" width="210" height="250"
            src="https://ps.w.org/wp-coupons-and-deals/assets/icon-256x256.png?rev=1974447" alt="Card image cap" />
        </div>
        <div class="card-body text-center">
          <br />
          <a style="text-decoration: none; " href="#Top">
            <h3 class="text text-info">Let's explore!</h3>
          </a>
        </div>
      </div>
    </div>

    <div class="col-lg-3 mt-2" *ngIf="utilityService.isAdmin()">
      <div class="card" style="width: 20rem; height: 21.7rem">
        <div style="width: 15rem; align-self: center">
          <img class="card-img-top" width="210" height="250"
            src="https://ps.w.org/wp-coupons-and-deals/assets/icon-256x256.png?rev=1974447" alt="Card image cap" />
        </div>

        <div class="card-body">
          <div class="text-center px-xl-3">
            <button class="btn btn-success btn-block" type="button" data-toggle="modal" data-target="#user-form-modal">
              Add New Coupon
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" role="dialog" tabindex="-1" id="user-form-modal">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Create Coupon</h5>
            <button type="button" class="close" data-dismiss="modal">
              <span aria-hidden="true">Ã—</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="py-1">
              <form class="form" [formGroup]="newCouponForm" (ngSubmit)="submitCoupon(newCouponForm.value)"
                novalidate="">
                <div class="row">
                  <div class="col">
                    <div class="row">
                      <div class="col">
                        <div class="form-group">
                          <label>Coupon Name</label>
                          <input class="form-control" formControlName="couponName" type="text" name="name"
                            placeholder="Coupon Name" required [ngClass]="{
                              'is-invalid':
                                newCouponForm.controls.couponName.touched &&
                                newCouponForm.controls.couponName.errors
                            }" />
                          <div *ngIf="
                              newCouponForm.controls.couponName.invalid &&
                              (newCouponForm.controls.couponName.dirty ||
                                newCouponForm.controls.couponName.touched)
                            ">
                            <small class="text text-danger">Please enter a coupon Name (Minimum 4
                              characters)!</small>
                          </div>
                        </div>
                      </div>
                      <div class="col">
                        <div class="form-group">
                          <label>Coupon Type</label>
                          <input class="form-control" formControlName="couponType" minlength="3" type="text"
                            name="username" placeholder="Coupon Type" required [ngClass]="{
                              'is-invalid':
                                newCouponForm.controls.couponType.touched &&
                                newCouponForm.controls.couponType.errors
                            }" />
                          <div *ngIf="
                              newCouponForm.controls.couponType.invalid &&
                              (newCouponForm.controls.couponType.dirty ||
                                newCouponForm.controls.couponType.touched)
                            ">
                            <small class="text text-danger">Please enter a coupon type (Minimum 3
                              characters)!</small>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col">
                        <div class="form-group">
                          <label>Coupon Description</label>
                          <textarea class="form-control" formControlName="couponDescription" placeholder="Description"
                            required [ngClass]="{
                              'is-invalid':
                                newCouponForm.controls.couponDescription
                                  .touched &&
                                newCouponForm.controls.couponDescription.errors
                            }"></textarea>
                          <div *ngIf="
                              newCouponForm.controls.couponDescription
                                .invalid &&
                              (newCouponForm.controls.couponDescription.dirty ||
                                newCouponForm.controls.couponDescription
                                  .touched)
                            ">
                            <small class="text text-danger">Please enter coupon description!</small>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col mb-3">
                        <div class="form-group">
                          <label>Coupon Discount</label>
                          <input class="form-control" formControlName="couponDiscount" type="number"
                            placeholder="Discount" required [ngClass]="{
                              'is-invalid':
                                newCouponForm.controls.couponDiscount.touched &&
                                newCouponForm.controls.couponDiscount.errors
                            }" />
                          <div *ngIf="
                              newCouponForm.controls.couponDiscount.invalid &&
                              (newCouponForm.controls.couponDiscount.dirty ||
                                newCouponForm.controls.couponDiscount.touched)
                            ">
                            <small class="text text-danger">Please enter coupon discount (number)!</small>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col mb-3">
                        <div class="form-group">
                          <label>Coupon Discount Type</label>
                          <select class="form-control" formControlName="couponDiscountType" required [ngClass]="{
                              'is-invalid':
                                newCouponForm.controls.couponDiscountType
                                  .touched &&
                                newCouponForm.controls.couponDiscountType.errors
                            }">
                            <option value="Rs">Rs</option>
                            <option value="%">%</option>
                          </select>
                          <div *ngIf="
                              newCouponForm.controls.couponDiscountType
                                .invalid &&
                              (newCouponForm.controls.couponDiscountType
                                .dirty ||
                                newCouponForm.controls.couponDiscountType
                                  .touched)
                            ">
                            <small class="text text-danger">Please enter coupon discount type!</small>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col mb-3">
                        <div class="form-group">
                          <label>Coupon Code</label>
                          <input type="text" class="form-control" minlength="{5}" formControlName="couponCode"
                            [ngClass]="{
                              'is-invalid':
                                newCouponForm.controls.couponCode.touched &&
                                newCouponForm.controls.couponCode.errors
                            }" required />
                          <div class="invalid-feedback" *ngIf="
                              newCouponForm.controls.couponCode.invalid &&
                              (newCouponForm.controls.couponCode.dirty ||
                                newCouponForm.controls.couponCode.touched)
                            ">
                            <small class="text text-danger">
                              Please input a valid coupon code (Minimum 5
                              characters) !</small>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="mb-3 ml-3">
                        <img src="" id="file-upload-image" height="100" width="100" alt="no-preview" />
                        <label id="file-upload-url" name="couponURL">
                          {{ this.newCouponForm.controls.couponURL.value }}
                        </label>
                        <div class="invalid-feedback" *ngIf="
                            newCouponForm.controls.couponURL.invalid &&
                            (newCouponForm.controls.couponURL.dirty ||
                              newCouponForm.controls.couponURL.touched)
                          ">
                          <small class="text text-danger">
                            Please upload an image URL</small>
                        </div>
                        <input id="upload" (change)="getImageURL($event)" type="file" class="form-control" />
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col d-flex justify-content-end">
                    <button class="btn btn-primary" type="submit" [disabled]="newCouponForm.invalid">
                      Add Coupon
                    </button>
                    <button type="submit" hidden="true" data-toggle="modal" data-target="#user-form-modal"
                      (click)="addCouponModalToggle()">
                      Add Coupon
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-------------------------------after home slider--------------------------------------------------------->

    <div class="flex-container mt-3 col-sm-12">
      <div class="container mb-3 mt-3" *ngIf="listOfCoupons.length > 0">

        <section class="pt-0 pb-0">
          <div class="container">
            <div class="row">
              <div class="col-12 d-flex justify-content-between">
                <h2 class="gh-title"><b>Popular Offers of the Day</b></h2>
                <div>
                  <button class="btn btn-primary mb-3 mr-1" role="button" (click)="previousIndex()">
                    <i class="fa fa-arrow-left"></i>
                  </button>
                  <button class="btn btn-primary mb-3" role="button" (click)="nextIndex()">
                    <i class="fa fa-arrow-right"></i>
                  </button>
                </div>
              </div>
              <div class="col-12">
                <div id="carouselExampleIndicators2" class="carousel slide" data-ride="carousel">
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <div class="row">
                        <div class="col-md-4 mb-3" *ngFor="let i of getCouponsByActiveRow(currentIndex)">
                          <div class="card">
                            <img width="auto" height="220px" alt="100%x280" *ngIf="!i.couponURL"
                              src="https://images.unsplash.com/photo-1532712938310-34cb3982ef74?ixlib=rb-0.3.5&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=1080&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjMyMDc0fQ&amp;s=3d2e8a2039c06dd26db977fe6ac6186a" />
                            <img width="auto" height="220px" alt="100%x280" *ngIf="i.couponURL"
                              src="{{ i.couponURL }}" />
                            <div class="card-body" (click)="gotoCouponCodeComponent(i)">
                              <h4 class="card-title">{{ i.couponName }}</h4>
                              <p class="card-text">
                                {{ i.couponDiscount
                                }}{{ i.couponDiscountType }} OFF -
                                {{ i.couponDescription }}
                              </p>
                            </div>
                            <div class="card-body d-flex justify-content-between" *ngIf="utilityService.isAdmin()">
                              <a href="#" class="btn btn-success btn-md" [routerLink]="['/admin/editCoupon', i._id]"><i
                                  class="fa fa-edit"></i></a>
                              <a href="#" class="btn btn-danger btn-md" data-toggle="modal"
                                data-target="#deleteConfirmModal" (click)="setCurrentDeleteId(i._id)"><i
                                  class="fa fa-trash"></i></a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <div class="container mt-3" *ngIf="listOfCoupons.length === 0">
        <section class="pt-0 pb-0">
          <h4 class="text text-secondary">
            Oops! . . . Popular Offers of the day are unavailable right now!
          </h4>
        </section>
      </div>
    </div>
    <!------------------------------- after card slider ------------------------------------->
    <!---------- below snippet for coupons to be sorted by categories ------>
    <div class="container mt-3 bg-dark">
      <div class="container mt-3" id="Top">
        <h2 class="gh-title" style="color: white">
          <b>Top Offers & Coupons</b>
        </h2>
      </div>
      <div class="row">
        <div class="col-md-3">
          <!-- Tabs nav -->
          <div class="nav flex-column nav-pills nav-pills-custom" id="v-pills-tab" role="tablist"
            aria-orientation="vertical">
            <a class="nav-link mb-3 p-3 shadow active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home"
              role="tab" aria-controls="v-pills-home" aria-selected="true">
              <i class="fa fa-plane mr-2"></i>
              <span class="font-weight-bold small text-uppercase">Travel</span></a>

            <a class="nav-link mb-3 p-3 shadow" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile"
              role="tab" aria-controls="v-pills-profile" aria-selected="false">
              <i class="fa fa-shopping-bag mr-2"></i>
              <span class="font-weight-bold small text-uppercase">Fashion</span></a>

            <a class="nav-link mb-3 p-3 shadow" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages"
              role="tab" aria-controls="v-pills-messages" aria-selected="false">
              <i class="fa fa-star mr-2"></i>
              <span class="font-weight-bold small text-uppercase">Food</span></a>

            <a class="nav-link mb-3 p-3 shadow" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings"
              role="tab" aria-controls="v-pills-settings" aria-selected="false">
              <i class="fa fa-laptop mr-2"></i>
              <span class="font-weight-bold small text-uppercase">Electronics</span>
            </a>
          </div>
        </div>
        <div class="col-md-9 mb-3">
          <!-- Tabs content -->
          <div class="tab-content" id="v-pills-tabContent">
            <div class="tab-pane fade shadow rounded bg-white show active p-5" id="v-pills-home" role="tabpanel"
              aria-labelledby="v-pills-home-tab">
              <div class="container my-container">
                <div class="row">
                  <div class="col-md-4" *ngFor="let j of this.getCouponsByGroupName('Travel')">
                    <div class="thumbnail">
                      <a style="text-decoration: none;" class="text tex-info" (click)="gotoCouponCodeComponent(j)">
                        <img src="{{ j.couponURL}}" alt="Lights" style="width: 100%" *ngIf="j.couponURL" />

                        <img alt="Lights" style="width: 100%" *ngIf="!j.couponURL"
                          src="https://images.unsplash.com/photo-1532712938310-34cb3982ef74?ixlib=rb-0.3.5&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=1080&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjMyMDc0fQ&amp;s=3d2e8a2039c06dd26db977fe6ac6186a" />

                        <div class="caption" style="width: 70%">
                          <p style="color: black;">
                            {{ j.couponDescription }}
                          </p>
                        </div>
                      </a>
                    </div>
                  </div>
                  <div class="col-md-4" *ngIf="
                    !this.getCouponsByGroupName('Travel') ||
                    this.getCouponsByGroupName('Travel')?.length === 0
                  ">
                    <div class="thumbnail">
                      <a>
                        <img alt="Lights" style="width: 100%" src="../../assets/images/ComingSoon.jpg" />

                        <div class="caption" style="width: 70%">
                          <p>Coming Soon . . .</p>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-pane fade shadow rounded bg-white p-5" id="v-pills-profile" role="tabpanel"
              aria-labelledby="v-pills-profile-tab">
              <div class="container">
                <div class="row">
                  <div class="col-md-4" *ngFor="let j of this.getCouponsByGroupName('Fashion')">
                    <div class="thumbnail">
                      <a style="text-decoration: none;" class="text tex-info" (click)="gotoCouponCodeComponent(j)">
                        <img src="{{ j.couponURL }}" alt="Lights" style="width: 100%" *ngIf="j.couponURL" />

                        <img alt="Lights" style="width: 100%" *ngIf="!j.couponURL"
                          src="https://images.unsplash.com/photo-1532712938310-34cb3982ef74?ixlib=rb-0.3.5&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=1080&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjMyMDc0fQ&amp;s=3d2e8a2039c06dd26db977fe6ac6186a" />

                        <div class="caption" style="width: 70%">
                          <p style="color: black;">
                            {{ j.couponDescription }}
                          </p>
                        </div>
                      </a>
                    </div>
                  </div>

                  <div class="col-md-4" *ngIf="
                    !this.getCouponsByGroupName('Fashion') ||
                    this.getCouponsByGroupName('Fashion')?.length === 0
                  ">
                    <div class="thumbnail">
                      <a>
                        <img alt="Lights" style="width: 100%" src="../../assets/images/ComingSoon.jpg" />

                        <div class="caption" style="width: 70%">
                          <p>Coming Soon . . .</p>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-pane fade shadow rounded bg-white p-5" id="v-pills-messages" role="tabpanel"
              aria-labelledby="v-pills-messages-tab">
              <div class="container">
                <div class="row">
                  <div class="col-md-4" *ngFor="let j of this.getCouponsByGroupName('Food')">
                    <div class="thumbnail">
                      <a style="text-decoration: none;" class="text tex-info" (click)="gotoCouponCodeComponent(j)">
                        <img src="{{ j.couponURL }}" alt="Lights" style="width: 100%" *ngIf="j.couponURL" />

                        <img alt="Lights" style="width: 100%" *ngIf="!j.couponURL"
                          src="https://images.unsplash.com/photo-1532712938310-34cb3982ef74?ixlib=rb-0.3.5&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb&amp;w=1080&amp;fit=max&amp;ixid=eyJhcHBfaWQiOjMyMDc0fQ&amp;s=3d2e8a2039c06dd26db977fe6ac6186a" />

                        <div class="caption" style="width: 70%">
                          <p style="color: black;">
                            {{ j.couponDescription }}
                          </p>
                        </div>
                      </a>
                    </div>
                  </div>

                  <div class="col-md-4" *ngIf="
                    !this.getCouponsByGroupName('Food') ||
                    this.getCouponsByGroupName('Food')?.length === 0
                  ">
                    <div class="thumbnail">
                      <a>
                        <img alt="Lights" style="width: 100%" src="../../assets/images/ComingSoon.jpg" />

                        <div class="caption" style="width: 70%">
                          <p>Coming Soon . . .</p>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="tab-pane fade shadow rounded bg-white p-5" id="v-pills-settings" role="tabpanel"
              aria-labelledby="v-pills-settings-tab">
              <div class="container">
                <div class="row">
                  <div class="col-md-4" *ngFor="let j of this.getCouponsByGroupName('Electronics')">
                    <div class="thumbnail">
                      <a style="text-decoration: none;" class="text tex-info" (click)="gotoCouponCodeComponent(j)">
                        <img src="{{ j.couponURL }}" alt="Lights" style="width: 100%" *ngIf="j.couponURL" />

                        <img alt="Lights" style="width: 100%" *ngIf="!j.couponURL"
                          src="https://thumbor.forbes.com/thumbor/fit-in/1200x0/filters%3Aformat%28jpg%29/https%3A%2F%2Fspecials-images.forbesimg.com%2Fimageserve%2F5e77786810380d0006fbbd51%2F0x0.jpg" />

                        <div class="caption" style="width: 70%">
                          <p style="color: black;">
                            {{ j.couponDescription }}
                          </p>
                        </div>
                      </a>
                    </div>
                  </div>

                  <div class="col-md-4" *ngIf="
                    !this.getCouponsByGroupName('Electronics') ||
                    this.getCouponsByGroupName('Electronics')?.length === 0
                  ">
                    <div class="thumbnail">
                      <a>
                        <img alt="Lights" style="width: 100%" src="../../assets/images/ComingSoon.jpg" />

                        <div class="caption" style="width: 70%">
                          <p>Coming Soon . . .</p>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!----------------------------After vertical tabs slider--------------------------->
    <!------- below snippet for newsletter subscription ------->

    <section class="home-newsletter mt-5 mb-5 col-sm-12">
      <div class="container">
        <div class="row">
          <div class="col-sm-12">
            <div class="single">
              <h2>Subscribe to our Newsletter</h2>
              <div class="input-group">
                <input type="email" class="form-control" placeholder="Enter your email" id="subscriptionEmail" />
                <span class="input-group-btn ml-1">
                  <button class="btn btn-theme" type="submit" data-toggle="modal" data-target="#myModal"
                    (click)="getSubscription()">
                    Subscribe
                  </button>
                </span>
              </div>
            </div>
            <div class="modal fade" id="myModal" role="dialog">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                      &times;
                    </button>
                  </div>
                  <div class="modal-body">
                    <p>
                      <strong>Congratulations! You are Now Subscribe to
                        Newsletter</strong>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <app-admin-crud></app-admin-crud>

    <!--------------------------------After Subscribe Button------------------------->

    <!--<div *ngFor='let c of listOfCoupons'>
    <div>
        <label>
            {{c.couponName}}
        </label>
        <br>
        <label>
            {{c.couponDescription}}
        </label>
        <br>
    </div>
</div>-->
    <!-----------------------------------Delete Modal-------------------------------------------->

    <div class="modal fade" id="deleteConfirmModal" tabindex="-1" role="dialog"
      aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">
              Confirm Delete
            </h5>

            <button type="button" class="close" data-dismiss="modal" (click)="setCurrentDeleteId('')"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <h4>Are you sure you want to delete?</h4>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="setCurrentDeleteId('')">
              Cancel
            </button>
            <button type="button" class="btn btn-danger" (click)="deleteByID()">
              Yes
            </button>
            <button type="button" hidden="true" (click)="closeDeleteConfirmationModal()" data-toggle="modal"
              data-target="#deleteConfirmModal">
              Hidden Btn
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>